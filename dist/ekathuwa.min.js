/**
 * ekathuwa
 * @version v0.1.3 - 2013-11-01
 * @link https://github.com/sarath2/ngEkathuwa
 * @author Sarath Ambegoda <sarath2mail@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";angular.module("ngEkathuwa",["ngRoute"]),function(a){angular.module("ngEkathuwa",["ngRoute"]),angular.module("ngEkathuwa",["ngRoute"]).run(["$rootScope","$ekathuwa",function(a,b){a.$ekathuwa=b}]).provider("$ekathuwa",function(){this.$get=["$compile","$rootScope","$timeout","$q",function(b,c,d,e){return this.modal=function(f){function g(a){angular.element("#ekathuwaSt"+f.id).remove();var b="#"+f.id+" .modal-body { height: "+a+"; overflow: auto; margin-right: 1px; }";b=b+" #"+f.id+" .modal-dialog { "+k+"} @media (max-width: 768px) {#"+f.id+" .modal-dialog {width:90%;} #"+f.id+" .modal-body { height: auto; overflow: visible; }}",angular.element("head").append('<style id="ekathuwaSt'+f.id+'">'+b+"</style>")}function h(a){var b=angular.element("#"+f.id+" .modal-header").outerHeight()||60,c=angular.element("#"+f.id+" .modal-body").outerHeight()||200,d=angular.element("#"+f.id+" .modal-footer").outerHeight()||60,e=80,g=a-(b+d+e);return g>c?"auto":g+"px"}var i={id:"ekathuwaModalID",scope:c.$new(),controller:null,backdrop:!0,keyboard:!0,remote:!1,show:!0,modalClass:"fade",role:"dialog",contentStyle:null,contentCustomSize:0,contentPreSize:"df",templateURL:null,templateHTML:null,bodyTemplateURL:null,bodyTemplate:null,header:!0,headerText:null,headerClass:"",headerTemplate:null,headerCloseBtn:!0,footer:!0,footerClass:"",footerTemplate:null,footerCloseBtn:!0,footerSaveBtn:!1},j="",k="",l="",m="",n="",o="";f=angular.extend(i,f);var p={backdrop:f.backdrop,keyboard:f.keyboard,remote:f.remote,show:f.show},q="#"+f.id+" .modal";if(l=f.controller?"ng-controller="+f.controller:"",null!==f.templateURL&&""!==f.templateURL)j="<div "+l+' id="'+f.id+'" ng-include="\''+f.templateURL+"'\"></div>";else{var r="<div "+l+' id="'+f.id+'">';if(null!==f.templateHTML&&""!==f.templateHTML)j=r+f.templateHTML+"</div>";else{if(m=null!==f.bodyTemplateURL&&""!==f.bodyTemplateURL?'<div class="modal-body" ng-include="\''+f.bodyTemplateURL+"'\"></div>":null!==f.bodyTemplate&&""!==f.bodyTemplate?'<div class="modal-body">'+f.bodyTemplate+"</div>":'<div class="modal-body">Ekathuwa modal body.</div>',f.header)if(null!==f.headerTemplate&&""!==f.headerTemplate)o='<div class="modal-header '+f.headerClass+'">'+f.headerTemplate+"</div>";else{var s="";null!==f.headerText&&""!==f.headerText&&(s='<h4 id="myModalLabel" class="modal-title">'+f.headerText+"</h4>"),o='<div class="modal-header '+f.headerClass+'"><button ng-if="'+f.headerCloseBtn+'" aria-hidden="true" data-dismiss="modal" class="close" type="button">x</button>'+s+"</div>"}f.footer&&(n=null!==f.footerTemplate&&""!==f.footerTemplate?'<div class="modal-footer '+f.footerClass+'">'+f.footerTemplate+"</div>":'<div class="modal-footer '+f.footerClass+'"><button ng-if="'+f.footerCloseBtn+'" data-dismiss="modal" class="btn btn-default" type="button">Close</button><button ng-if="'+f.footerSaveBtn+'" class="btn btn-primary" type="button">Save changes</button></div>'),j=r+'<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="myModal" style="display: none;"><div class="modal-dialog"><div class="modal-content">'+o+m+n+"</div></div></div></div>"}}switch(null!==f.contentStyle&&""!==f.contentStyle&&(k=f.contentStyle),0!==f.contentCustomSize&&angular.isNumber(f.contentCustomSize)&&""!==f.contentCustomSize&&null!==f.contentCustomSize&&(k=k+";width: "+f.contentCustomSize+"%;"),f.contentPreSize){case"sm":k+=";width:25%;";break;case"md":k+=";width:50%;";break;case"lg":k+=";width:75%;";break;case"fl":k+=";width:100%;"}a.onresize=function(){g(h($(a).height()))},d(function(){g(h($(a).height()))},500),angular.element("#"+f.id).remove();var t=angular.element(j);angular.element("body").append(t),b(t)(f.scope);var u=e.defer();return null!==f.templateURL&&""!==f.templateURL?d(function(){u.resolve(angular.element(q).modal(p))},200):u.resolve(angular.element(q).modal(p)),u.promise},this}]})}(a,b)}(window,document);